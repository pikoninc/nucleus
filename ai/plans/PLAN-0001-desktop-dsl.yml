version: 1
id: PLAN-0001
slug: desktop-dsl
title: builtin_desktop Desktop Rules DSL operational hardening
status: draft # draft|active|done|archived

source:
  specs:
    - specs/framework/02_contracts.md
    - specs/framework/04_plugin_system.md
  contracts:
    - contracts/plugins/builtin.desktop/schemas/desktop_rules.schema.json
    - contracts/plugins/builtin.desktop/examples/desktop_rules.example.yml
  code:
    - plugins/builtin_desktop/planner.py
    - plugins/builtin_desktop/manifest.json
goals:
  - Keep spec/implementation/examples aligned and split changes into reviewable units
  - Enable extension without compromising compatibility and safety (scope/permissions/audit)

non_goals:
  - Replacing the entire desktop automation execution substrate

constraints:
  - Existing examples and tests must pass (if breaking, provide migration guidance)
  - Record rationale and impact in `ai/tasks/`

deliverables:
  - ai/tasks/TASK-0001.yml
  - ai/tasks/TASK-0002.yml
  - ai/status/board.yml
  - ai/runs/RUN-0001.json

risk_assessment:
  level: medium # low|medium|high
  notes:
    - DSL changes can affect user-config compatibility, so update schema and examples together

test_plan:
  - python scripts/check_contracts.py
  - python -m unittest discover -s tests -t . -p "test_*.py"

